## Словари



![фвыа](http://images.na4u.ru/static/dict/1.jpg)
### 1. Что такое словарь? 

- **Словарь (`dict`)** — это встроенный тип данных в Python, реализующий структуру "ассоциативный массив" (или "хеш-таблица").
- Словарь хранит пары _ключ → значение_.
- Пример:
```python

student = {
	"name": "Иван",     
	"age": 20,     
	"grades": [5, 4, 5] 
	}
```


В примере выше показана реализация словаря для хранения информации о студенте. 

**"name", "age", "grades"** - это ключи словаря. По ним мы можем получить значения. 

Если мы хотим узнать список оценок студента,  мы должны написать следующее

```python
print(student['grades']) # результат: [5, 4, 5] 
```

Получения значения по ключу - основное свойство словарей. Благодаря нему можно хранить информацию более понятно, по примеру таблиц. При этом доступ к значениям происходит за одно и то же время, независимо от размера словаря. 


#### Преимущества словарей

1. **Быстрый доступ** к данным по ключу (в среднем за O(1) операций).
2. **Гибкость**: ключом может быть почти любой неизменяемый объект.
3. **Удобное хранение структурированных данных** — JSON-подобный формат.
	1. Словари и списки активно используются для передачи информации в вебе, большинство АПИ работают с использованием комбинации список и словарей

### 2. Основные свойства

1. **Ключи уникальны**:
    - Нельзя хранить два одинаковых ключа.
    - Последнее присваивание перезаписывает значение:
        
        `d = {"a": 1, "a": 2}  # {"a": 2}`
        
1. **Ключи должны быть хешируемыми**:
    - Можно использовать числа, строки, кортежи.
    - Нельзя использовать списки, множества или другие изменяемые объекты.
        
2. **Порядок хранения** (Python 3.7+):
    - Сохраняется порядок добавления элементов.

Обычно в качестве ключей используются строки, так как в таком виде информация наиболее понятна. 

### 3. Основные операции

- Создание:

```python
d = dict(name="Анна", age=22)
# или
d = {"name": "Анна", "age": 22}
```

- Доступ к элементу:

```python
d["name"]     # "Анна"
d.get("age")  # 22
d.get("x", 0) # если ключа нет, вернёт 0
```

- Удаление элемента:

```python
del d["age"]
d.pop("city")
```


- Перебор элементов:

**Перебирать можно ключи, значения либо пары ключ-значение**

```python
for key in d:          # только ключи
    print(key)
    
for value in d.values():          # только ключи
    print(key)

for key, value in d.items():  # пары
    print(key, value)
```


### Популярные структуры с использованием словарей

#### Плоский словарь 

Представим, что мы хотим хранить соответствие слова и перевода его на другой язык. Тогда все можно уместить в одном словаре 

```python
words = {'яблоко': 'apple', 'персик': 'peach'}

words['яблоко'] # получить первод слова яблоко
```

Минусы этого подхода в том, что при добавлении еще одного языка, такая структура уже не походит. 

Поэтому можно решить задачу двумя способами. 
#### Словарь словарей


```python
words = {
	"яблоко": {"en": 'apple', 'fr': 'pomme'},
    "персик": {"en": "peach", "fr": "pêche"}
    }

words['яблоко']['en'] # получить первод слова яблоко на английский
words['яблоко']['fr'] # получить первод слова яблоко на французский
```

Теперь мы можем расширять базу новыми переводами. Но что, если захотим получать русский перевод по английскому? Тогда такая структура тоже не подойдет. 

### Список словарей 

Список словарей - наиболее универсальная структура. 

```python
words = [
    {"ru": "яблоко", "en": 'apple', 'fr': 'pomme'},
    {"ru": "персик", "en": "peach", "fr": "pêche"},
]

for word in words:
	if word['en'] == 'apple':
		print(word['ru']) # получаем русский перевод по английскому
 
```


Подобным образом можем хранить информацию о студентах 

```python
students = [
    {"name": "Иван", "age": 20, "group": "A"},
    {"name": "Анна", "age": 22, "group": "B"},
    {"name": "Олег", "age": 21, "group": "A"}
]
```

**Плюсы**: 
- гибкость, можно описать любые данные, нет жесткой привязки к ключу

**Минусы**: 
- усложняется поиск записи, тратим время на перебор 


Какую выбирать структуру - выбираете в зависимости от задачи. Но я бы советовал начинать со список словарей, а потом приводить ее к другому виду, если понимаете, что важна скорость и у вас есть возможность выделить ключ, по которому вы всегда будете доставать информацию 

### Немного про АПИ

JSON - популярный формат обмена данными представляет собой комбинацию списков и словарей. Сервисы в интернете часто предоставляют возможность коммуницировать с ними через подобный формат. То есть предоставляют АПИ. 

Например, так может выглядеть ответ Телеграм бота, если мы хотим посмотреть список всех сообщений

```json
{
  "ok": true,
  "result": [
    {
      "update_id": 123456789,
      "message": {
        "message_id": 1,
        "from": {
          "id": 987654321,
          "is_bot": false,
          "first_name": "Иван",
          "username": "ivan_ivanov",
          "language_code": "ru"
        },
        "chat": {
          "id": 987654321,
          "first_name": "Иван",
          "username": "ivan_ivanov",
          "type": "private"
        },
        "date": 1633036800,
        "text": "Привет, бот!"
      }
    }
  ]
}
```

Подробнее разберем это в следующих темах. 